---
title: 系统管理
date: 2021-06-17 21:08:48
permalink: /linux/system/
categories:
  - Linux相关
tags:
  - system
  - 权限
---


## 一、用户管理

1. 用户管理


2. 用户组管理

```bash
# 1. 查看用户所在组
groups user1

# 2. 将用户添加到次要组或者附加组
# 将user1添加到group1
usermod -a -G group1 user1
gpasswd -M user1 group1

# 将user1添加到多组个组
usermod -a -G group1,group2 user1

# 将多个用户添加到组
gpasswd -M user1,user2 group1

# 修改用户的主要组
usermod -g group1 user1

# 3. 将用户从组中删除
gpasswd -d user1 group1

```
## 二、权限管理

## 三、文件操作

### 1. 查看文件指定行数

```bash
# e.g. 查看文件第10-30行
cat file.txt |tail -n +10 |head -n 20
```

## 四、系统管理

### 1. 防火墙管理
1. 开启防火墙服务
```bash
systemctl start firewalld.service
systemctl stop firewalld.service
systemctl restart firewalld.service
```

2. firewall-cmd常用命令
```bash
# 查看当前所有规则
firewall-cmd --list-all

# 添加端口
firewall-cmd --zone=public --add-port=443/tcp —permanent

# 删除端口
firewall-cmd --zone=public --remove-port=443/tcp —permanent

# 应用规则
firewall-cmd --reload

#
# 命令含义：
# –-zone 作用域
# –-add-port=80/tcp #添加端口，格式为：端口/通讯协议
# –-permanent #永久生效，没有此参数重启后失效

# 禁用某个IP访问服务器  
firewall-cmd --permanent --add-rich-rule='rule family=ipv4 source address="10.10.16.2" drop'

# 禁用一个IP段
firewall-cmd --permanent --add-rich-rule='rule family=ipv4 source address="10.10.16.0/24" drop'

# 删除之前添加的规则(禁用某个IP访问服务器)
firewall-cmd --permanent --remove-rich-rule='rule family=ipv4 source address="10.10.16.2" drop'

# 指定IP授权访问
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="10.10.16.2" port protocol="tcp" port="22" accept'

firewall-cmd --add-rich-rule='rule family="ipv4" source address="114.246.34.8" port protocol="tcp" port=“3306" accept'

firewall-cmd --add-rich-rule='rule family=ipv4 source address=192.168.87.19 port protocol=tcp port=3306 accept'

# 拒绝(指定IP授权访问)
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="10.10.16.2" port protocol="tcp" port="22" drop'

# 移除(指定IP授权访问)
firewall-cmd --permanent --remove-rich-rule='rule family="ipv4" source address="10.10.16.2" port protocol="tcp" port="22" accept'

# 指定ip访问端口段
firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="192.168.142.166" port protocol="tcp" port="30000-31000" accept'

```

**注意**: 每次修改后记得要 `firewall-cmd --reload` 重新加载一下
