---
title: Axes
date: 2021-07-08 12:44:24
permalink: /pages/710a95/
categories:
  - 《ggplot2》专栏
tags:
  - ggplot2
  - axes
---

> 参考自 [cookbook-r](http://www.cookbook-r.com/Graphs/Axes_(ggplot2)/)

本文档介绍ggplot绘图中对axes的修改。在文档开始之前，先看看ggplot2默认的图例：
```R
library(ggplot2)
bp <- ggplot(data=PlantGrowth, aes(x=group, y=weight, fill=group)) + geom_boxplot()
bp
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708111043.png)

## 1. 交换X和Y轴
```R
bp + coord_flip()
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708132218.png)

## 2. 离散型坐标轴
### 2.1. 改变离散型刻度顺序
```R
# Manually set the order of a discrete-valued axis
bp + scale_x_discrete(limits=c("trt1","trt2","ctrl"))
```

> 只改变坐标轴，不会改变legend

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708133217.png)

### 2.2. 设置刻度线标签
```R
bp + scale_x_discrete(breaks=c("ctrl", "trt1", "trt2"),
                      labels=c("Control", "Treat 1", "Treat 2"))
					  
# Hide x tick marks, labels, and grid lines
bp + scale_x_discrete(breaks=NULL)

# Hide all tick marks and labels (on X axis), but keep the gridlines
bp + theme(axis.ticks = element_blank(), axis.text.x = element_blank())
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708134536.png)

## 3. 连续型坐标轴

### 3.1. 设置坐标轴范围
如果只是简单的想要坐标轴包含范围内的特定值，可以使用 `expand_limits()`。这只能扩大一个轴的范围；它不能缩小范围。
```R
# Make sure to include 0 in the y axis
bp + expand_limits(y=0)

# Make sure to include 0 and 8 in the y axis
bp + expand_limits(y=c(0,8))

```

> 在这个例子中，`bp + expand_limits(y=c(0,5))` 与 `bp + expand_limits(y=0)` 将得到相同的图，因为原图坐标轴已经包含了5

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708135403.png)

此外，可以明确的设置坐标轴的上下限，使用`ylim` 或者 `scale_y_continuous`，需要注意的是，只要使用了`scale_y_continuous`，`ylim`将失效

```R
# Set the range of a continuous-valued axis
# These are equivalent
bp + ylim(0, 8)
# bp + scale_y_continuous(limits=c(0, 8))

bp + ylim(4, 6)
# 如果ylim 不包含全部数据范围，会提示warning信息
# Warning message:# Removed 6 rows containing non-finite values (stat_boxplot). 
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708140044.png)

### 3.2. 反转坐标轴方向
```R
# Reverse order of a continuous-valued axis
bp + scale_y_reverse()
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708140433.png)

### 3.3. 设置和隐藏刻度

### 3.4. 坐标轴转换(log、sqrt)
### 3.5. 固定x轴和y轴比率


## 4. 修改坐标轴标签
## 5. 修改坐标轴刻度
## 6. 隐藏网格线

网格线分为`major` 和 `minor`
- major: 与刻度对应的网格线
- minor: 刻度以外的辅助线

### 6.1. 隐藏所有垂直和水平网格线

```R
# Hide all the gridlines
bp + theme(panel.grid.minor=element_blank(),
           panel.grid.major=element_blank())

# Hide just the minor gridlines
bp + theme(panel.grid.minor=element_blank())
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708143724.png)

### 6.2. 隐藏垂直或水平网格线
```R
# Hide all the vertical gridlines
bp + theme(panel.grid.minor.x=element_blank(),
           panel.grid.major.x=element_blank())

# Hide all the horizontal gridlines
bp + theme(panel.grid.minor.y=element_blank(),
           panel.grid.major.y=element_blank())
		   
```

![](https://cdn.jsdelivr.net/gh/nkbaim/pics//blog/20210708143811.png)
